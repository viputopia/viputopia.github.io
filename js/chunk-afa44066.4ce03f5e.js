(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-afa44066"],{"332e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Redemption"},[a("div",{staticClass:"Redemptiontitle"},[a("div",{staticClass:"middle"},[a("div",[a("span",[t._v("我的质押")]),a("div",[a("span",[t._v(t._s(t.Redemptionagreement)+" LP")]),a("span",[t._v("≈$ "+t._s(t.USDT))])])]),a("div",[a("div",[a("img",{attrs:{src:n("8ea2"),alt:""}}),a("span",[t._v(t._s(t.USDT)+" USDT")])]),a("div",[a("img",{attrs:{src:n("dd20"),alt:""}}),a("span",[t._v(t._s(t.UPC)+" UPC")])])])]),a("div",{staticClass:"Withdrawablequantity"},[t._v("可撤回数量")]),a("div",{staticClass:"quantity"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.Redemptionagreements,expression:"Redemptionagreements"}],attrs:{type:"text"},domProps:{value:t.Redemptionagreements},on:{input:function(e){e.target.composing||(t.Redemptionagreements=e.target.value)}}}),a("span",[t._v("TRX-PIN/LP")])]),a("button",{on:{click:t.withdraw}},[t._v("撤回")])]),a("div",{staticClass:"Pledgetitle"},[t._v("撤回记录")]),t._l(t.list,(function(e){return a("div",{key:e,staticClass:"record"},[a("div",[t._m(0,!0),a("span",[t._v(t._s(e.time))])]),a("div",[a("span",[t._v("撤回数量")]),a("span",[t._v(t._s(e.amount))])])])}))],2)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("img",{attrs:{src:n("8ea2"),alt:""}}),a("img",{attrs:{src:n("dd20"),alt:""}}),a("span",[t._v("USDT-UPC/LP")])])}],i=n("5530"),o=(n("b680"),n("96cf"),n("1da1")),r={data:function(){return{Redemptionagreement:0,Redemptionagreements:"",UPC:0,USDT:0,list:[]}},created:function(){this.$contracts&&this.init()},methods:{init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,s,i,o,r,c,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$contracts.MasterChef.methods.userInfo(0,t.$address).call((function(e,n){e||(t.Redemptionagreement=n.amount.fromWei(),t.Redemptionagreements=n.amount.fromWei())})),t.$contracts.MasterChef.methods.userInfo(0,t.$address).call((function(e,n){e||(t.pledgeamount=n.amount.fromWei())})),e.next=4,t.$contracts.UPC.methods.balanceOf(t.$contracts.Token._address).call();case 4:return n=e.sent,e.next=7,t.$contracts.USDT.methods.balanceOf(t.$contracts.Token._address).call();case 7:return a=e.sent,e.next=10,t.$contracts.Token.methods.totalSupply().call();case 10:return s=e.sent,e.next=13,t.$contracts.MasterChef.methods.userInfo(0,t.$address).call();case 13:return i=e.sent,o=i.amount.toBNs().div(s).times("100"),r=n.toBNs().times(o).div("100").toFixed(0).fromWei(),c=a.toBNs().times(o).div("100").toFixed(0).fromWei(),t.UPC=r.toFixed(4),t.USDT=c.toFixed(4),e.next=21,t.$web3.eth.getBlock("latest");case 21:d=e.sent,t.$contracts.MasterChef.events.Withdraw({fromBlock:d.number-4990}).on("data",(function(e){console.log(e),t.list.unshift({amount:e.returnValues.amount.fromWei().toFixed(1)})}));case 23:case"end":return e.stop()}}),e)})))()},withdraw:function(){var t=this;if(console.log(this.Redemptionagreement),console.log(this.Redemptionagreements),""==this.Redemptionagreements)return vant.Toast.fail("赎回为空");if(this.Redemptionagreements>this.Redemptionagreement)return vant.Toast.fail("余额不足");var e=this.$contracts.MasterChef.methods.withdraw(0,this.Redemptionagreements.toWei());e.send({from:this.$address}).on("transactionHash",(function(t){vant.Toast.loading({message:"赎回中...",duration:"toast"})})).on("receipt",(function(e){vant.Toast.success("赎回成功"),t.init()})).on("error",(function(t){console.log(t),vant.Toast.fail("赎回失败")}))}}},c=Object(i["a"])({},r),d=c,m=(n("a62b"),n("2877")),u=Object(m["a"])(d,a,s,!1,null,"01b768ec",null);e["default"]=u.exports},"8ea2":function(t,e,n){t.exports=n.p+"img/USDT.5c93c206.svg"},a62b:function(t,e,n){"use strict";n("eaaa")},dd20:function(t,e,n){t.exports=n.p+"img/UPC.acb359d1.svg"},eaaa:function(t,e,n){}}]);